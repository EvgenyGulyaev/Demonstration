{"version":3,"sources":["assets/89250.jpg","config.js","api/index.js","components/App/styles.js","components/Image/index.js","components/ImageStorage/index.js","components/App/index.js","serviceWorker.js","index.js"],"names":["module","exports","url","config","postImage","acceptedFiles","a","data","FormData","append","axios","method","headers","res","console","log","getImage","ParentContainer","styled","div","srcBackground","ImageContainer","StyledImage","img","src","StyledImageContainer","text","MainPage","StyledImagesStorage","StyledContent","Image","name","alt","onClick","defaultProps","createResImage","image","split","mime","ImageStorage","files","setMainPicture","images","map","key","mask","backgroundImage","Background","App","useState","setImage","setFiles","setMask","dropRef","useRef","useEffect","fetchData","onDrop","useCallback","slice","file","Object","assign","preview","URL","createObjectURL","path","useDropzone","getRootProps","getInputProps","style","current","click","ref","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.d4dc8168.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/89250.4c80801a.jpg\";","export default {\n  url: 'http://localhost:3030',\n}\n","import axios from 'axios';\nimport config from '../config';\n\nconst { url } = config;\n\nexport const postImage = async (acceptedFiles) => {\n  try {\n    const data = new FormData();\n    data.append('image', acceptedFiles[0]);\n    const { data: res } = await axios({\n      method: 'post',\n      url,\n      data,\n      config: { headers: { 'Content-Type': 'multipart/form-data' } }\n    });\n    return res;\n  }\n  catch (e) {\n    console.log('error', e);\n    return {};\n  }\n};\n\n\nexport const getImage = async () => {\n  try {\n    const { data: res } = await axios({\n      method: 'get',\n      url,\n    });\n    return res;\n  }\n  catch (e) {\n    console.log('error', e);\n    return [];\n  }\n};\n","import styled from 'styled-components';\n\nexport const ParentContainer = styled.div`\n  position: fixed; \n  top: 0; \n  left: 0; \n  min-width: 100%;\n  min-height: 100%;\n  width: 100%;\n  height: 100%;\n  background-image: ${({srcBackground}) => `url(${srcBackground})`};\n`;\n\nexport const ImageContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: inherit;\n  height: inherit;\n    @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nexport const StyledImage = styled.img`\n  opacity: ${({src}) => src ? 1 : 0.5 };\n  border: ${({src}) => src ? 'none' : 'dashed black 1px'};\n  cursor: pointer;\n  height: auto;\n  width: 300px;\n  line-height: 250px;\n  text-align: center;\n  border-radius: 10px;\n`;\n\nexport const StyledImageContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-right: ${({text}) => text === 'Input' ? '20px' : 0 };\n`;\n\nexport const MainPage = styled.div`\n  height: inherit;\n`;\n\nexport const StyledImagesStorage = styled.div`\n  overflow-y: auto;\n  max-height: 99%;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding-right: 20px ;\n  @media (max-width: 768px) {\n    display: none;\n  }\n`;\n\nexport const StyledContent = styled.div`\n  display: none;\n`;","import React from 'react';\nimport { StyledImage, StyledImageContainer } from '../App/styles';\n\nconst Image = ({ name, src, alt, text, onClick }) => <StyledImageContainer text={text}>\n  <p>{name}</p>\n  <StyledImage onClick={onClick} src={src} alt={alt}/>\n</StyledImageContainer>;\n\nImage.defaultProps = {\n  text: '',\n  name: '',\n  src: '',\n  alt: '',\n  onClick: () => null,\n}\nexport default Image","import React from 'react';\nimport PropTypes from 'prop-types';\nimport config from '../../config';\n\nimport { StyledImageContainer, StyledImagesStorage } from '../App/styles';\nimport Image from '../Image';\n\nconst { url } = config;\n\nconst createResImage = (image = '') => {\n  const [name, mime] = image.split('.');\n  return `${name}_res.${mime}`\n}\n\nconst ImageStorage = ({files, setMainPicture}) => {\n  const images =  files.map(image => <Image\n    key={image} src={`${url}/${image}`}\n    onClick={() => setMainPicture({ image, mask: createResImage(image)})}\n    alt='NotFound'\n  />);\n\n  return <StyledImageContainer>\n    <StyledImagesStorage>\n    {images}\n    </StyledImagesStorage>\n  </StyledImageContainer>\n}\n\nImageStorage.propTypes = {\n  files: PropTypes.array,\n  setMainPicture: PropTypes.func,\n}\n\nImageStorage.defaultProps = {\n  files: [],\n  setMainPicture: () => null,\n}\n\nexport default ImageStorage;","import React, { useCallback, useState, useRef, useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { postImage, getImage } from '../../api';\nimport config from '../../config';\nimport {\n  ImageContainer, MainPage,\n  ParentContainer,\n  StyledContent,\n} from './styles';\nimport Image from '../Image';\nimport ImageStorage from '../ImageStorage';\nimport Background from '../../assets/89250.jpg';\n\nconst { url } = config;\nconst backgroundImage = `url(\"${ Background }\")`;\n\nconst App = () => {\n  const [image, setImage] = useState(null);\n  const [files, setFiles] = useState([]);\n  const [mask, setMask] = useState(null);\n  const dropRef = useRef(null);\n\n  useEffect(  () => {\n    async function fetchData() {\n      const files = await getImage();\n      setFiles(files);\n    }\n    fetchData();\n  }, []);\n\n  const onClickPicture = () => dropRef.current.click();\n\n  const setMainPicture = ({mask, image} = {}) => {\n    setImage(`${url}/${image}`);\n    setMask(`${url}/${mask}`);\n  }\n\n  const onDrop = useCallback(async (acceptedFiles) => {\n    acceptedFiles = acceptedFiles.slice(0, 1).map(file => Object.assign(file, {\n      preview: `${URL.createObjectURL(file)}`,\n      src: file.path,\n    }));\n    const { image, mask } =  await postImage(acceptedFiles);\n    setMainPicture({ image, mask });\n  }, []);\n\n  const { getRootProps, getInputProps } = useDropzone({ onDrop });\n\n  return (\n    <ParentContainer style={{backgroundImage}}>\n      <MainPage>\n        <ImageContainer>\n          <Image\n            name='Входное изображение'\n            src={image}\n            alt='Input'\n            text='Input'\n            onClick={onClickPicture}\n          />\n          <Image name='Маска' src={mask} alt='Mask' />\n        </ImageContainer>\n\n        <ImageStorage\n          setMainPicture={setMainPicture}\n          files={files}\n        />\n      </MainPage>\n\n      <StyledContent {...getRootProps()} ref={dropRef}>\n        <input {...getInputProps()} />\n      </StyledContent>\n    </ParentContainer>\n  )\n};\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}